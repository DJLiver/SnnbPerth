@page "/"
@using SnnbDB.ModelExt

<PageTitle>Monitor</PageTitle>
<RadzenRow>
    <RadzenColumn Size="12">
        <RadzenText Text="Monitor" TextStyle="TextStyle.H3" TagName="TagName.H1" Style="width: 1010px; height: 62px" />
    </RadzenColumn>
</RadzenRow>


<RadzenCard Style="width: 456px; height: 60px">
    <RadzenRow>
        <RadzenText Text="Server Time:" TextStyle="Radzen.Blazor.TextStyle.H5" TagName="TagName.H1" Style="width: 129px; height: 27px" />
        <RadzenText Text="@DataTimeStamp" TextStyle="Radzen.Blazor.TextStyle.H5" TagName="TagName.H1" Style="width: 188px; height: 22px" />
    </RadzenRow>
</RadzenCard>

<RadzenPanel Collapsed="true" AllowCollapse="true" Class=" rz-mx-auto" Style="float: left; padding-top: 10px; padding-bottom: 10px; margin-bottom: 10px; margin-top: 10px; width: 1350px">
    <HeaderTemplate>
        <RadzenRow JustifyContent="JustifyContent.Start" AlignItems="AlignItems.Center" Gap="0" Style="width: 1000px; height: 57px">
            <RadzenColumn Size="5" Style="width: 260px; height: 30px; display: flex">
                <RadzenIcon Icon="dvr" class="rz-mr-1" />
                <RadzenText Text="Primary network path" TextStyle="Radzen.Blazor.TextStyle.H5" Class="rz-display-flex rz-align-items-center rz-m-0" Style="width: 284px; height: 22px; padding: 10px"></RadzenText>
            </RadzenColumn>
            <RadzenColumn Size="7">
                <RadzenStack AlignItems="AlignItems.Center" Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.End" Style="width: 657px">
                    <RadzenText Text="Status" TextStyle="Radzen.Blazor.TextStyle.H6" Style=@StatusStyles[@PrimaryStatusStylesIndex] TextAlign="Radzen.TextAlign.Center" />
                    <RadzenText TextStyle="Radzen.Blazor.TextStyle.H6" Style=@PathStyles[@PrimaryPathStylesIndex] TextAlign="Radzen.TextAlign.Center" Text="@PrimaryPathTxt" />
                </RadzenStack>
            </RadzenColumn>
        </RadzenRow>
    </HeaderTemplate>

    <ChildContent>
        <RadzenDataGrid TItem="RtMonitorTable" Style="float: none; width: 1300px; margin-top: 10px" Data="@MonitorTablePrimary"
                        CellRender="@CellRender" HeaderCellRender="@HeaderFooterCellRender" ShowColumnTitleAsTooltip="true" ShowCellDataAsTooltip="true">
            <Columns>
                <RadzenDataGridColumn TItem="RtMonitorTable" Property="DateTimeStamp" Title="Time" Frozen="true" Width="200px">
                    <Template Context="data">

                        @if (data.DateTimeStampAlert)
                        {
                            <RadzenText Text=@data.DateTimeStamp Style="width: 150px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                        }
                        else
                        {
                            <RadzenText Text=@data.DateTimeStamp Style="width: 150px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                        }

                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Property="UnitName" Title="Name" Frozen="true" Width="110px"></RadzenDataGridColumn>

                <RadzenDataGridColumn TItem="RtMonitorTable" Property="RemoteUnit" Title="Remote" Width="110px"></RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Title="Peer" Property="PeerUnit" Width="110px"></RadzenDataGridColumn>

                <RadzenDataGridColumn TItem="RtMonitorTable" Property="CommsOk" Title="Communication" Width="80px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text=@data.CommsOk Style="width: 80px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                        }
                        else
                        {
                            <RadzenText Text=@data.CommsOk Style="width: 80px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                        }
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Title="Message" Property="CommMessage" Width="120px"></RadzenDataGridColumn>


                <RadzenDataGridColumn TItem="RtMonitorTable" Property="OnePpsPresent" Title="1PPS" Width="75px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 80px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                            if (data.OnePpsPresentAlert)
                            {
                                <RadzenText Text=@data.OnePpsPresent Style="width: 80px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>

                            }
                            else
                            {
                                <RadzenText Text=@data.OnePpsPresent Style="width: 80px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                            }

                        }
                    </Template>

                </RadzenDataGridColumn>

                <RadzenDataGridColumn TItem="RtMonitorTable" Property="TenMhzLocked" Title="10MHz" Width="75px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 80px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                            @if (data.TenMhzLockedAlert)
                            {
                                <RadzenText Text=@data.TenMhzLocked Style="width: 80px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                            }
                            else
                            {
                                <RadzenText Text=@data.TenMhzLocked Style="width: 80px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                            }
                        }
                    </Template>

                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Property="MeasuredDelay" Title="Delay" Width="120px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 100px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                            @if (data.MeasuredDelayAlert)
                            {
                                <RadzenText Text=@data.MeasuredDelay Style="width: 100px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                            }
                            else
                            {
                                <RadzenText Text=@data.MeasuredDelay Style="width: 100px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                            }
                        }
                    </Template>

                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Property="MeasuredNetworkRate" Title="Stream" Width="120px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 110px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                        @if (data.MeasuredNetworkRateAlert)
                        {
                            <RadzenText Text=@data.MeasuredNetworkRate Style="width: 110px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                        }
                        else
                        {
                            <RadzenText Text=@data.MeasuredNetworkRate Style="width: 110px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                        }
                        }
                    </Template>

                </RadzenDataGridColumn>

                <RadzenDataGridColumn TItem="RtMonitorTable" Property="StreamEnable" Title="IP stream Enb" Width="80px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 80px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                            @if (data.StreamEnableAlert)
                            {
                                <RadzenText Text=@data.StreamEnable Style="width: 80px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                            }
                            else
                            {
                                <RadzenText Text=@data.StreamEnable Style="width: 80px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                            }
                        }
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Property="RfOutputEnable" Title="RFout Enb" Width="80px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 80px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                            @if (data.RfOutputEnableAlert)
                            {
                                <RadzenText Text=@data.RfOutputEnable Style="width: 80px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                            }
                            else
                            {
                                <RadzenText Text=@data.RfOutputEnable Style="width: 80px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                            }
                        }
                    </Template>

                </RadzenDataGridColumn>



            </Columns>
        </RadzenDataGrid>
    </ChildContent>
</RadzenPanel>

<RadzenPanel Collapsed="true" AllowCollapse="true" Class=" rz-mx-auto" Style="float: left; padding-top: 10px; padding-bottom: 10px; margin-bottom: 10px; margin-top: 10px; width: 1350px">
    <HeaderTemplate>
        <RadzenRow JustifyContent="JustifyContent.Start" AlignItems="AlignItems.Center" Gap="0" Style="width: 1000px; height: 57px">
            <RadzenColumn Size="5" Style="width: 260px; height: 30px; display: flex">
                <RadzenIcon Icon="dvr" class="rz-mr-1" />
                <RadzenText Text="Secondary network path" TextStyle="Radzen.Blazor.TextStyle.H5" Class="rz-display-flex rz-align-items-center rz-m-0" Style="width: 284px; height: 22px; padding: 10px"></RadzenText>
            </RadzenColumn>
            <RadzenColumn Size="7">
                <RadzenStack AlignItems="AlignItems.Center" Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.End" Style="width: 657px">
                    <RadzenText Text="Status" TextStyle="Radzen.Blazor.TextStyle.H6" Style=@StatusStyles[@SecondaryStatusStylesIndex] TextAlign="Radzen.TextAlign.Center" />
                    <RadzenText TextStyle="Radzen.Blazor.TextStyle.H6" Style=@PathStyles[@SecondaryPathStylesIndex] TextAlign="Radzen.TextAlign.Center" Text="@SecondaryPathTxt" />
                </RadzenStack>
            </RadzenColumn>
        </RadzenRow>
    </HeaderTemplate>

    <ChildContent>
        <RadzenDataGrid TItem="RtMonitorTable" Style="float: none; width: 1300px; margin-top: 10px" Data="@MonitorTableSecondary"
                        CellRender="@CellRender" HeaderCellRender="@HeaderFooterCellRender" ShowColumnTitleAsTooltip="true" ShowCellDataAsTooltip="true">
            <Columns>
                <RadzenDataGridColumn TItem="RtMonitorTable" Property="DateTimeStamp" Title="Time" Frozen="true" Width="200px">
                    <Template Context="data">

                        @if (data.DateTimeStampAlert)
                        {
                            <RadzenText Text=@data.DateTimeStamp Style="width: 150px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                        }
                        else
                        {
                            <RadzenText Text=@data.DateTimeStamp Style="width: 150px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                        }

                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Property="UnitName" Title="Name" Frozen="true" Width="110px"></RadzenDataGridColumn>

                <RadzenDataGridColumn TItem="RtMonitorTable" Property="RemoteUnit" Title="Remote" Width="110px"></RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Title="Peer" Property="PeerUnit" Width="110px"></RadzenDataGridColumn>

                <RadzenDataGridColumn TItem="RtMonitorTable" Property="CommsOk" Title="Communication" Width="80px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text=@data.CommsOk Style="width: 80px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                        }
                        else
                        {
                            <RadzenText Text=@data.CommsOk Style="width: 80px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                        }
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Title="Message" Property="CommMessage" Width="120px"></RadzenDataGridColumn>


                <RadzenDataGridColumn TItem="RtMonitorTable" Property="OnePpsPresent" Title="1PPS" Width="75px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 80px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                            if (data.OnePpsPresentAlert)
                            {
                                <RadzenText Text=@data.OnePpsPresent Style="width: 80px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>

                            }
                            else
                            {
                                <RadzenText Text=@data.OnePpsPresent Style="width: 80px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                            }

                        }
                    </Template>

                </RadzenDataGridColumn>

                <RadzenDataGridColumn TItem="RtMonitorTable" Property="TenMhzLocked" Title="10MHz" Width="75px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 80px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                            @if (data.TenMhzLockedAlert)
                            {
                                <RadzenText Text=@data.TenMhzLocked Style="width: 80px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                            }
                            else
                            {
                                <RadzenText Text=@data.TenMhzLocked Style="width: 80px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                            }
                        }
                    </Template>

                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Property="MeasuredDelay" Title="Delay" Width="120px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 100px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                            @if (data.MeasuredDelayAlert)
                            {
                                <RadzenText Text=@data.MeasuredDelay Style="width: 100px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                            }
                            else
                            {
                                <RadzenText Text=@data.MeasuredDelay Style="width: 100px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                            }
                        }
                    </Template>

                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Property="MeasuredNetworkRate" Title="Stream" Width="120px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 110px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                            @if (data.MeasuredNetworkRateAlert)
                            {
                                <RadzenText Text=@data.MeasuredNetworkRate Style="width: 110px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                            }
                            else
                            {
                                <RadzenText Text=@data.MeasuredNetworkRate Style="width: 110px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                            }
                        }
                    </Template>

                </RadzenDataGridColumn>

                <RadzenDataGridColumn TItem="RtMonitorTable" Property="StreamEnable" Title="IP stream Enb" Width="80px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 80px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                            @if (data.StreamEnableAlert)
                            {
                                <RadzenText Text=@data.StreamEnable Style="width: 80px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                            }
                            else
                            {
                                <RadzenText Text=@data.StreamEnable Style="width: 80px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                            }
                        }
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="RtMonitorTable" Property="RfOutputEnable" Title="RFout Enb" Width="80px">
                    <Template Context="data">
                        @if (data.CommsOkAlert)
                        {
                            <RadzenText Text="NA" Style="width: 80px;  padding-left: 4px; background-color: #989594"></RadzenText>
                        }
                        else
                        {
                            @if (data.RfOutputEnableAlert)
                            {
                                <RadzenText Text=@data.RfOutputEnable Style="width: 80px; border-left: 4px solid #8d2108; padding-left: 4px"></RadzenText>
                            }
                            else
                            {
                                <RadzenText Text=@data.RfOutputEnable Style="width: 80px; border-left: 4px solid #1e801d; padding-left: 4px"></RadzenText>

                            }
                        }
                    </Template>

                </RadzenDataGridColumn>



            </Columns>
        </RadzenDataGrid>
    </ChildContent>
</RadzenPanel>


